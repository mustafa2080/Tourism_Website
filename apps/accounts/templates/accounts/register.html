{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="max-w-md mx-auto bg-white p-8 rounded-lg shadow-md mt-8">
    <h2 class="text-2xl font-bold mb-6 text-center">تسجيل حساب جديد</h2>
    <form method="POST" class="space-y-4">
        {% csrf_token %}
        
        <!-- حقول التسجيل الأخرى -->
        {{ form|crispy }}

        <!-- كلمة المرور -->
        <div class="mb-4 relative">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="password1">
                كلمة المرور
            </label>
            <div class="relative">
                <input type="password" 
                       name="password1" 
                       id="password1"
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                       required>
                <button type="button" 
                        class="absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
                        onclick="togglePasswordVisibility('password1')">
                    <i class="fas fa-eye" id="password1-toggle-icon"></i>
                </button>
            </div>
        </div>

        <!-- تأكيد كلمة المرور -->
        <div class="mb-4 relative">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="password2">
                تأكيد كلمة المرور
            </label>
            <div class="relative">
                <input type="password" 
                       name="password2" 
                       id="password2"
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                       required>
                <button type="button" 
                        class="absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
                        onclick="togglePasswordVisibility('password2')">
                    <i class="fas fa-eye" id="password2-toggle-icon"></i>
                </button>
            </div>
        </div>

        <button type="submit" 
                class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-md transition duration-300">
            تسجيل
        </button>
    </form>
</div>

<script>
function togglePasswordVisibility(inputId) {
    const passwordInput = document.getElementById(inputId);
    const icon = document.getElementById(inputId + '-toggle-icon');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    } else {
        passwordInput.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    }
}
</script>
{% endblock %}