{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="flex items-center justify-center min-h-screen bg-gray-100">
    <div class="max-w-md w-full bg-white p-8 rounded-lg shadow-lg">
        <!-- شعار وعنوان -->
        <div class="text-center mb-6">
            <div class="inline-block p-3 rounded-full bg-green-50 mb-3">
                <i class="fas fa-user-plus text-3xl text-green-500"></i>
            </div>
            <h2 class="text-2xl font-bold text-gray-800">تسجيل حساب جديد</h2>
            <p class="text-gray-600 mt-1">أنشئ حسابك الجديد واستمتع بخدماتنا</p>
        </div>

        <form method="POST" class="space-y-5">
            {% csrf_token %}
            
            <!-- حقول التسجيل من النموذج -->
            <div class="space-y-4">
                {% for field in form %}
                    {% if field.name != 'password1' and field.name != 'password2' %}
                        <div class="mb-4">
                            <label class="block text-gray-700 font-medium mb-2" for="{{ field.id_for_label }}">
                                {{ field.label }}
                            </label>
                            <div class="relative">
                                {% if field.name == 'username' %}
                                    <div class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                                        <i class="fas fa-user"></i>
                                    </div>
                                {% elif field.name == 'email' %}
                                    <div class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                {% endif %}
                                {{ field|as_crispy_field }}
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <!-- كلمة المرور -->
            <div class="mb-4">
                <label class="block text-gray-700 font-medium mb-2" for="password1">
                    كلمة المرور
                </label>
                <div class="relative">
                    <div class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                        <i class="fas fa-lock"></i>
                    </div>
                    <input type="password" 
                           name="password1" 
                           id="password1"
                           class="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                           required>
                    <button type="button" 
                            class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none"
                            onclick="togglePassword('password1', 'togglePassword1Icon')">
                        <i id="togglePassword1Icon" class="fas fa-eye"></i>
                    </button>
                </div>
                <p class="text-xs text-gray-500 mt-1">يجب أن تحتوي كلمة المرور على 8 أحرف على الأقل مع مزيج من الأحرف والأرقام</p>
            </div>

            <!-- تأكيد كلمة المرور -->
            <div class="mb-4">
                <label class="block text-gray-700 font-medium mb-2" for="password2">
                    تأكيد كلمة المرور
                </label>
                <div class="relative">
                    <div class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                        <i class="fas fa-lock"></i>
                    </div>
                    <input type="password" 
                           name="password2" 
                           id="password2"
                           class="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                           required>
                    <button type="button" 
                            class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none"
                            onclick="togglePassword('password2', 'togglePassword2Icon')">
                        <i id="togglePassword2Icon" class="fas fa-eye"></i>
                    </button>
                </div>
            </div>

            <!-- الموافقة على الشروط -->
            <div class="flex items-center mb-4">
                <input type="checkbox" id="terms" name="terms" class="h-4 w-4 text-green-500 border-gray-300 rounded focus:ring-green-500" required>
                <label for="terms" class="mr-2 block text-gray-700 text-sm">
                    أوافق على <a href="#" class="text-green-500 hover:text-green-700">الشروط والأحكام</a> و <a href="#" class="text-green-500 hover:text-green-700">سياسة الخصوصية</a>
                </label>
            </div>

            <button type="submit" 
                    class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300 shadow-md">
                إنشاء حساب
            </button>
        </form>

        <!-- رابط تسجيل الدخول -->
        <div class="mt-6 text-center">
            <p class="text-gray-600">
                لديك حساب بالفعل؟
                <a href="#" class="text-green-500 hover:text-green-700 font-medium">تسجيل الدخول</a>
            </p>
        </div>

        <!-- خيارات تسجيل بديلة -->
        <div class="mt-6">
            <div class="relative">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-gray-300"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="px-2 bg-white text-gray-500">أو التسجيل عبر</span>
                </div>
            </div>

            <div class="grid grid-cols-3 gap-3 mt-4">
                <button type="button" class="flex justify-center items-center py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-300">
                    <i class="fab fa-google text-red-500"></i>
                </button>
                <button type="button" class="flex justify-center items-center py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-300">
                    <i class="fab fa-facebook-f text-blue-600"></i>
                </button>
                <button type="button" class="flex justify-center items-center py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-300">
                    <i class="fab fa-twitter text-blue-400"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<script>
function togglePassword(inputId, iconId) {
    const passwordInput = document.getElementById(inputId);
    const icon = document.getElementById(iconId);
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    } else {
        passwordInput.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    }
}
</script>
{% endblock %}